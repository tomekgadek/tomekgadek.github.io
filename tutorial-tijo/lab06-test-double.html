<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Tomasz GÄ…dek">
    <meta name="description" content="Laboratorium 06: Atrapa">

    <link rel="icon" type="image/png" href="../img/unittest-logo.png">

    <title>UnitTest | TiJO Lab06</title>

    <link rel="stylesheet" href="../css/header.css">
    <link rel="stylesheet" href="../css/side-menu.css">
    <link rel="stylesheet" href="../css/general.css">
    <link rel="stylesheet" href="../css/content.css">
    <link rel="stylesheet" href="../css/footer.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css">
</head>
<body>
    <header>
        <div class="header-container">
            <a href="/" class="logo"><img src="../img/unittest-logo.png" alt="UnitTest Tomasz GÄ…dek" /></a>
            <button class="menu-button" onclick="toggleMenu()">â˜°</button>
        </div>
        <div class="side-menu" id="side-menu">
            <nav class="menu">
                <a href="lab06-test-double.html">Lab 06: Atrapa</a>
                <a href="mailto:t_gadek@atar.edu.pl">Kontakt</a>
            </nav>
        </div>
    </header>

    <section class="title">
        <h1>Testowanie i JakoÅ›Ä‡ Oprogramowania</h1>
        <p><strong>Laboratorium 06</strong>: Atrapa</p>
    </section>

    <main class="content">
        <div class="content-details">

        <h1>Atrapa</h1>
        
        <p>
            Atrapa to symulowany obiekt, ktÃ³ry w kontrolowany sposÃ³b naÅ›laduje 
            zachowanie rzeczywistego obiektu. 
        </p>

        <p>
            W Frameworku Spock mamy moÅ¼liwoÅ›Ä‡ skorzystaÄ‡ z nastÄ™pujÄ…cych atrap: Mock, Stub, Spy.
        </p>

        <ul>
            <li>
                Mock to obiekt symulujÄ…cy dziaÅ‚anie rzeczywistego obiektu. Pozwala okreÅ›liÄ‡ 
                jakich interakcji spodziewamy siÄ™ w trakcie testÃ³w, a nastÄ™pnie 
                zweryfikowaÄ‡, czy nastÄ…piÅ‚y.
            </li>
            <li>
                Stub to obiekt, ktÃ³ry zawiera przykÅ‚adowÄ… implementacjÄ™ imitujÄ…cÄ… 
                dziaÅ‚anie tej wÅ‚aÅ›ciwej.
            </li>
            <li>
                Spy to obiekt hybrydowy. Stanowi poÅ‚Ä…czenia Mock i Stub.
            </li>
        </ul>

        <h2>Implementacja</h2>

        <p>
            UtwÃ³rz nowy projekt oraz dodaj nastÄ™pujÄ…cÄ… zaleÅ¼noÅ›Ä‡ do 
            pliku <a href="./static/pom.xml">pom.xml</a>.
        </p>

        <pre class="code"><code id="code" class="language-xml">&lt;dependencies>
    &lt;dependency>
        &lt;groupId>net.bytebuddy&lt;/groupId>
        &lt;artifactId>byte-buddy&lt;/artifactId>
        &lt;version>1.11.18&lt;/version>
        &lt;scope>test&lt;/scope>
    &lt;/dependency>
&lt;/dependencies></code></pre>         

        <p>UmieÅ›Ä‡ w pakiecie produkcyjnym nastÄ™pujÄ…cÄ… implementacjÄ™ (najlepiej jÄ… skopiuj).</p>

        <pre class="code"><code id="code" class="language-java">interface Operation {
    int count(String text);
 }
 
 class OperationImpl implements Operation {
 
    public int count(String text) {
        return text.length();
    }
 }
 
 class Counter {
 
    private final Operation operation;
 
    public Counter(Operation operation) {
        this.operation = operation;
    }
 
    int countCharacters(String text) {
        return operation.count(text);
    }
}</code></pre>
        <h2>Wykorzystanie atrap w praktyce</h2>

        <p>UmieÅ›Ä‡ w pakiecie testowym implementacjÄ™ klasy <strong>CounterMockSpec</strong>.</p>

        <div class="centered-image">
            <img src="./static/img/lab06-mock.png" alt="mock">
        </div>

        <p>UmieÅ›Ä‡ w pakiecie testowym implementacjÄ™ klasy <strong>CounterStubSpec</strong>.</p>

        <div class="centered-image">
            <img src="./static/img/lab06-stub.png" alt="stub">
        </div>

        <p>UUmieÅ›Ä‡ w pakiecie testowym implementacjÄ™ klasy <strong>CounterSpySpec</strong>.</p>

        <div class="centered-image">
            <img src="./static/img/lab06-spy.png" alt="spy">
        </div>

        <h2>Obserwacje</h2>

        <p>
            ğŸ§‘â€ğŸ’»â“Poeksperymentuj ğŸ«µ. WywoÅ‚aj w kodzie produkcyjnym testowanÄ… metodÄ™ kilka 
            razy. Popsuj trochÄ™ logikÄ™ dziaÅ‚ania testowanej metody.
        </p>

        <p>
            Po kaÅ¼dych zmianach uruchamiaj testy i obserwuj ğŸ’¡
        </p>

        <h2>Zadanie</h2>

        <p>
            Tworzysz system zarzÄ…dzania ksiÄ…Å¼kami w bibliotece. Aktualnie nie ma 
            jeszcze implementacji systemu, ale zostaÅ‚ zdefiniowany interfejs 
            oraz wstÄ™pna implementacja operacji.
        </p>

        <pre class="code"><code id="code" class="language-java">record Book(String title, String author, int year) { }

interface BookManagement {

   void addBook(String title, String author, int year);

   boolean removeBook(String title);

   List<Book> allBooks();
}

class Library {

   private final BookManagement bookManagement;

   public Library(BookManagement bookManagement) {
       this.bookManagement = bookManagement;
   }

   public boolean borrowBook(String title) {
       return bookManagement.removeBook(title);
   }

   public void returnBook(String title, String author, int year) {
       bookManagement.addBook(title, author, year);
   }

   public List<Book> books() {
       return bookManagement.allBooks();
   }
}</code></pre>

        <p>Interfejs nie posiada implementacji - <strong>to nie jest bÅ‚Ä…d!</strong></p>

        <p>
            Dopisz testy oraz wykorzystaj atrapy (Wykorzystaj Mock i Stub. Atrapa Spy nie 
            zadziaÅ‚a, poniewaÅ¼ potrzebna jest implementacja - jeÅ¼eli chcesz uÅ¼yÄ‡ Spy 
            to dopisz brakujÄ…cÄ… implementacjÄ™).
        </p>

        <h1>Czy wiesz, Å¼e...</h1>

        <p>
            PojÄ™cie atrap (<em>ang. Test Double</em>) zostaÅ‚o formalnie wprowadzone przez 
            Gerarda Meszarosa w ksiÄ…Å¼ce 
            <a href="http://xunitpatterns.com/Larger%20Cover.html">xUnit Test Patterns</a> 
            opublikowanej w 2007 roku. W ksiÄ…Å¼ce Meszaros przedstawia rÃ³Å¼ne rodzaje atrap, 
            takie jak Dummy, Fake, Stub, Spy i Mock oraz opisuje ich zastosowania i korzyÅ›ci w 
            testowaniu oprogramowania.
        </p>

        <div class="centered-image">
            <img src="./static/img/lab06-test-double.png" alt="test double">
        </div>

    </div>
    </main>

    <footer>
        &copy; <span id="current-year">0000</span> UnitTest Tomasz GÄ…dek. Wszelkie prawa zastrzeÅ¼one.
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <script src="../js/current-year-initializer.js" type="text/javascript"></script>
    <script src="../js/menu.js" type="text/javascript"></script>
    <script src="../js/encode-source-code.js" type="text/javascript"></script>
</body>
</html>
